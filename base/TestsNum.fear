package base;


NumArith:F[Tests,Tests]{::
  .test((+1.num + (+2.num)) .assertEq (+3.num))
  .test((+5.num - (+2.num)) .assertEq (+3.num))
  .test((+3.num * (+4.num)) .assertEq (+12.num))
  .test((+6.num / (+3.num)) .assertEq (+2.num))
  .test(-5.num.abs .assertEq (+5.num))
  .test(+9.num.sqrt .assertEq +3.0)
  .test(-1.num.sqrt.isNaN .assertEq True)
  .test(+1.num.assertEqDelta(+1.num,+0.num))
}

NumRound:F[Tests,Tests]{::
  .test(+1.num / (+2.num).round .assertEq (+0.num))
  .test(+3.num / (+2.num).round .assertEq (+2.num))
  .test(+5.num / (+2.num).round .assertEq (+2.num))
  .test(-1.num / (+2.num).round .assertEq (+0.num))
  .test(-3.num / (+2.num).round .assertEq (-2.num))
  .test(-5.num / (+2.num).round .assertEq (-2.num))
  .test(+1.num / (+3.num).round .assertEq (+0.num))
  .test(+2.num / (+3.num).round .assertEq (+1.num))
  .test(+1.num / (+2.num).round.isInteger .assertEq True)
}

NumFloorCeilTrunc:F[Tests,Tests]{::
  .test(+3.num / (+2.num).floor .assertEq (+1.num))
  .test(+3.num / (+2.num).ceil  .assertEq (+2.num))
  .test(+3.num / (+2.num).trunc0 .assertEq (+1.num))
  .test(-3.num / (+2.num).floor .assertEq (-2.num))
  .test(-3.num / (+2.num).ceil  .assertEq (-1.num))
  .test(-3.num / (+2.num).trunc0 .assertEq (-1.num))
}

NumIsInteger:F[Tests,Tests]{::
  .test(+2.num.isInteger .assertEq True)
  .test(+1.num / (+2.num).isInteger .assertEq False)
}

NumConv:F[Tests,Tests]{::
  .test((+5.num).int .assertEq +5)
  .test((+5.num).nat .assertEq 5)
  .test((+5.num).byte .assertEq (+5.byte))
  .test((+5.num).float .assertEq +5.0)

  .test(+1.num / (+2.num).int .assertEq +0)
  .test(-1.num / (+2.num).nat .assertEq 0)

  .test(+2.num.intExact .assertEq({::},Opts#(+2)))
  .test(+1.num / (+2.num).intExact .assertEq({::},Opt[Int]))
  .test(+2.num.natExact .assertEq({::},Opts#(2)))
  .test(-1.num.natExact .assertEq({::},Opt[Nat]))
  .test(+255.num.byteExact .assertEq({::},Opts#(+255.byte)))
  .test(+256.num.byteExact .assertEq({::},Opt[Byte]))
}

NumRange:F[Tests,Tests]{::
  .test(+3.num.assertInRange(+1.num,+5.num))
  .test(+3.num.assertInRangeOpen(+1.num,+5.num))
  .test(+3.num.assertInRangeLoOpen(+1.num,+3.num))
  .test(+3.num.assertInRangeHiOpen(+3.num,+5.num))
  .test(+0.num.clamp(+1.num,+5.num) .assertEq (+1.num))
  .test(+6.num.clamp(+1.num,+5.num) .assertEq (+5.num))
  .test(+3.num.clamp(+1.num,+5.num) .assertEq (+3.num))
}